<mxfile host="app.diagrams.net" modified="2022-01-06T07:08:45.751Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.93 Safari/537.36" etag="UoQXM_KUcn0A7teRNzOV" version="15.9.4" type="github">
  <diagram id="Il6zib8G1KRrYEGMZTlJ" name="第 1 页">
    <mxGraphModel dx="1662" dy="762" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2339" pageHeight="3300" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="aFSbq4zLURjuSDahOT8q-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="aFSbq4zLURjuSDahOT8q-1" target="aFSbq4zLURjuSDahOT8q-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aFSbq4zLURjuSDahOT8q-1" value="开始" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="580" y="130" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aFSbq4zLURjuSDahOT8q-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="aFSbq4zLURjuSDahOT8q-2" target="aFSbq4zLURjuSDahOT8q-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aFSbq4zLURjuSDahOT8q-2" value="用户在商城&lt;br&gt;购买课程" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="580" y="260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aFSbq4zLURjuSDahOT8q-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="aFSbq4zLURjuSDahOT8q-4" target="aFSbq4zLURjuSDahOT8q-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aFSbq4zLURjuSDahOT8q-4" value="商城发送MQ到作业批改系统" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="580" y="370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aFSbq4zLURjuSDahOT8q-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="aFSbq4zLURjuSDahOT8q-6" target="aFSbq4zLURjuSDahOT8q-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aFSbq4zLURjuSDahOT8q-6" value="作业批改系统请求纸条服务端获取用户信息" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="580" y="470" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aFSbq4zLURjuSDahOT8q-9" value="结束" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="580" y="580" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ri1Frq5KzClj6QZ898nN-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="ri1Frq5KzClj6QZ898nN-1" target="ri1Frq5KzClj6QZ898nN-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ri1Frq5KzClj6QZ898nN-1" value="开始" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1290" y="80" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ri1Frq5KzClj6QZ898nN-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="ri1Frq5KzClj6QZ898nN-2" target="ri1Frq5KzClj6QZ898nN-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ri1Frq5KzClj6QZ898nN-2" value="连接腾讯云、阿里云&lt;br&gt;两个es数据源" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1290" y="210" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ri1Frq5KzClj6QZ898nN-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="ri1Frq5KzClj6QZ898nN-5" target="ri1Frq5KzClj6QZ898nN-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ri1Frq5KzClj6QZ898nN-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="ri1Frq5KzClj6QZ898nN-5" target="ri1Frq5KzClj6QZ898nN-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ri1Frq5KzClj6QZ898nN-5" value="判断索引总量&lt;br&gt;大于10W" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1290" y="340" width="120" height="110" as="geometry" />
        </mxCell>
        <mxCell id="ri1Frq5KzClj6QZ898nN-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="ri1Frq5KzClj6QZ898nN-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1280" y="560" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1150" y="560" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ri1Frq5KzClj6QZ898nN-6" value="抽样数据" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1090" y="365" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ri1Frq5KzClj6QZ898nN-8" value="Yes" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1240" y="380" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ri1Frq5KzClj6QZ898nN-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="ri1Frq5KzClj6QZ898nN-9" target="ri1Frq5KzClj6QZ898nN-14" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1420" y="560" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1550" y="560" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ri1Frq5KzClj6QZ898nN-9" value="全量数据&lt;br&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1490" y="365" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ri1Frq5KzClj6QZ898nN-11" value="No" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1425" y="380" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ri1Frq5KzClj6QZ898nN-13" value="结束" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1290" y="740" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="1fpQUF7GKC2W4AB3YoLm-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="ri1Frq5KzClj6QZ898nN-14">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1350" y="640" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ri1Frq5KzClj6QZ898nN-14" value="不同索引开启&lt;br&gt;多线程处理" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1290" y="530" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1fpQUF7GKC2W4AB3YoLm-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ri1Frq5KzClj6QZ898nN-22" target="ri1Frq5KzClj6QZ898nN-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ri1Frq5KzClj6QZ898nN-22" value="每行数据对字段进行排序" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1880" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1fpQUF7GKC2W4AB3YoLm-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ri1Frq5KzClj6QZ898nN-24" target="ri1Frq5KzClj6QZ898nN-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ri1Frq5KzClj6QZ898nN-24" value="&lt;span style=&quot;color: rgb(34 , 34 , 34) ; font-family: &amp;#34;helvetica neue&amp;#34; , &amp;#34;hiragino sans gb&amp;#34; , &amp;#34;microsoft yahei&amp;#34; , , &amp;#34;arial&amp;#34; , sans-serif ; font-size: 14px ; text-align: left ; background-color: rgb(255 , 255 , 255)&quot;&gt;ASCII码从小到大排序&lt;/span&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1880" y="470" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1fpQUF7GKC2W4AB3YoLm-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ri1Frq5KzClj6QZ898nN-27" target="1fpQUF7GKC2W4AB3YoLm-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ri1Frq5KzClj6QZ898nN-27" value="对排序后的数据进行hash计算和匹配" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1880" y="600" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1fpQUF7GKC2W4AB3YoLm-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="ri1Frq5KzClj6QZ898nN-28">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1940" y="330" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ri1Frq5KzClj6QZ898nN-28" value="抽样数据 ，es按id进行深度分页、每页取1000条、从1000中&lt;br&gt;取模运算，拼接剩余数据" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1880" y="180" width="120" height="90" as="geometry" />
        </mxCell>
        <mxCell id="1fpQUF7GKC2W4AB3YoLm-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="1fpQUF7GKC2W4AB3YoLm-1" target="ri1Frq5KzClj6QZ898nN-28">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1fpQUF7GKC2W4AB3YoLm-1" value="开始" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1880" y="50" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="1fpQUF7GKC2W4AB3YoLm-2" value="结束" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1880" y="730" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="1fpQUF7GKC2W4AB3YoLm-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="1fpQUF7GKC2W4AB3YoLm-11">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1350" y="730" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1fpQUF7GKC2W4AB3YoLm-11" value="每条数据全字段&lt;br&gt;进行hash匹配" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1290" y="640" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
